{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/services/afiliados-form-compartido.service\";\nimport * as i2 from \"@angular/forms\";\nimport * as i3 from \"@angular/material/dialog\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"@angular/material/form-field\";\nimport * as i6 from \"@angular/material/input\";\nimport * as i7 from \"@angular/material/button\";\nimport * as i8 from \"@angular/material/tooltip\";\nimport * as i9 from \"@angular/material/icon\";\n\nfunction DatosDocumentacionComponent_ng_container_5_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r5 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"div\", 6);\n    i0.ɵɵelementStart(2, \"div\", 7);\n    i0.ɵɵelementStart(3, \"mat-form-field\", 8);\n    i0.ɵɵelement(4, \"input\", 9);\n    i0.ɵɵelementStart(5, \"mat-label\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"button\", 10);\n    i0.ɵɵelementStart(8, \"mat-icon\");\n    i0.ɵɵtext(9, \"help\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"div\", 7);\n    i0.ɵɵelementStart(11, \"button\", 11);\n    i0.ɵɵlistener(\"click\", function DatosDocumentacionComponent_ng_container_5_Template_button_click_11_listener() {\n      i0.ɵɵrestoreView(_r5);\n\n      const _r3 = i0.ɵɵreference(14);\n\n      return _r3.click();\n    });\n    i0.ɵɵtext(12, \" Cargar archivo \");\n    i0.ɵɵelementStart(13, \"input\", 12, 13);\n    i0.ɵɵlistener(\"change\", function DatosDocumentacionComponent_ng_container_5_Template_input_change_13_listener($event) {\n      const restoredCtx = i0.ɵɵrestoreView(_r5);\n      const pregunta_r1 = restoredCtx.$implicit;\n      const ctx_r6 = i0.ɵɵnextContext();\n      let tmp_b_0;\n      return ctx_r6.cargarArchivo($event, (tmp_b_0 = ctx_r6.getFormGroup(pregunta_r1).get(\"NU_IDTIPOARCHIVO_ARCH\")) == null ? null : tmp_b_0.value);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    const pregunta_r1 = ctx.$implicit;\n    const ctx_r0 = i0.ɵɵnextContext();\n    let tmp_1_0;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"formGroup\", ctx_r0.getFormGroup(pregunta_r1));\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate((tmp_1_0 = ctx_r0.getFormGroup(pregunta_r1).get(\"TX_TIPOARCHIVO\")) == null ? null : tmp_1_0.value);\n  }\n}\n\nexport let DatosDocumentacionComponent = /*#__PURE__*/(() => {\n  class DatosDocumentacionComponent {\n    constructor(sharedFb, formBuilder, dialog) {\n      this.sharedFb = sharedFb;\n      this.formBuilder = formBuilder;\n      this.dialog = dialog;\n      this.zonaUrbanaActivado = null; //\n      //identidadAdverso\n\n      this.test = {\n        ImageBaseData: '',\n        nombreArchivo: ''\n      };\n      this.formularioAfiliados = this.sharedFb.getAfiliadosForm(); // public string? TX_BASE64_ARCH { get; set; } //BASE64\n      // public int NU_IDTIPOARCHIVO_ARCH { get; set; }\n\n      this.formularioArchivos = this.formBuilder.group({\n        identidadAnverso: this.formBuilder.group({\n          NU_IDTIPOARCHIVO_ARCH: 0,\n          nombreArchivo: '',\n          TX_BASE64_ARCH: null\n        }),\n        identidadReverso: this.formBuilder.group({\n          NU_IDTIPOARCHIVO_ARCH: 1,\n          nombreArchivo: '',\n          TX_BASE64_ARCH: null\n        }),\n        registroCivil: this.formBuilder.group({\n          NU_IDTIPOARCHIVO_ARCH: 2,\n          nombreArchivo: '',\n          TX_BASE64_ARCH: null\n        })\n      });\n      this.formArchivos = this.formBuilder.group({\n        archivos: this.formBuilder.array([])\n      });\n      this.crearArchivos();\n    }\n\n    get getArchivos() {\n      return this.formArchivos.get('archivos');\n    }\n\n    getFormGroup(contrl) {\n      // console.log(contrl)\n      return contrl;\n    }\n\n    crearArchivos() {\n      this.getArchivos.push(this.formBuilder.group({\n        TX_NOMBREARCHIVO: [null],\n        TX_BASE64_ARCH: [null],\n        TX_TIPOARCHIVO: ['DOCUMENTO DE IDENTIDAD REVERSO'],\n        NU_IDTIPOARCHIVO_ARCH: [1]\n      }));\n      this.getArchivos.push(this.formBuilder.group({\n        TX_NOMBREARCHIVO: [null],\n        TX_BASE64_ARCH: [null],\n        TX_TIPOARCHIVO: ['DOCUMENTO DE IDENTIDAD REVERSO'],\n        NU_IDTIPOARCHIVO_ARCH: [2]\n      }));\n      this.getArchivos.push(this.formBuilder.group({\n        TX_NOMBREARCHIVO: [null],\n        TX_BASE64_ARCH: [null],\n        TX_TIPOARCHIVO: ['REGISTRO CIVIL NACIMIENTO HIJO'],\n        NU_IDTIPOARCHIVO_ARCH: [3]\n      }));\n      this.getArchivos.push(this.formBuilder.group({\n        TX_NOMBREARCHIVO: [null],\n        TX_BASE64_ARCH: [null],\n        TX_TIPOARCHIVO: ['ACTA DE MATRIMONIO - DECLARACION JURAMENTADA'],\n        NU_IDTIPOARCHIVO_ARCH: [4]\n      }));\n      this.getArchivos.push(this.formBuilder.group({\n        TX_NOMBREARCHIVO: [null],\n        TX_BASE64_ARCH: [null],\n        TX_TIPOARCHIVO: ['CERTIFICADO DE ESTUDIOS'],\n        NU_IDTIPOARCHIVO_ARCH: [5]\n      }));\n      this.getArchivos.push(this.formBuilder.group({\n        TX_NOMBREARCHIVO: [null],\n        TX_BASE64_ARCH: [null],\n        TX_TIPOARCHIVO: ['ACTA DE ENTREGA ICBF'],\n        NU_IDTIPOARCHIVO_ARCH: [6]\n      }));\n      this.getArchivos.push(this.formBuilder.group({\n        TX_NOMBREARCHIVO: [null],\n        TX_BASE64_ARCH: [null],\n        TX_TIPOARCHIVO: ['DECLARACION DE DEPENDENCIA ECONOMICA'],\n        NU_IDTIPOARCHIVO_ARCH: [7]\n      }));\n      this.getArchivos.push(this.formBuilder.group({\n        TX_NOMBREARCHIVO: [null],\n        TX_BASE64_ARCH: [null],\n        TX_TIPOARCHIVO: ['REGISTRO CIVIL DE NACIMIENTO AFILIADO'],\n        NU_IDTIPOARCHIVO_ARCH: [8]\n      }));\n      this.getArchivos.push(this.formBuilder.group({\n        TX_NOMBREARCHIVO: [null],\n        TX_BASE64_ARCH: [null],\n        TX_TIPOARCHIVO: ['CERTIFICADO DE NACIDO VIVO'],\n        NU_IDTIPOARCHIVO_ARCH: [9]\n      }));\n      this.getArchivos.push(this.formBuilder.group({\n        TX_NOMBREARCHIVO: [null],\n        TX_BASE64_ARCH: [null],\n        TX_TIPOARCHIVO: ['CONSTANCIA DE DISCAPACIDAD'],\n        NU_IDTIPOARCHIVO_ARCH: [10]\n      }));\n      this.getArchivos.push(this.formBuilder.group({\n        TX_NOMBREARCHIVO: [null],\n        TX_BASE64_ARCH: [null],\n        TX_TIPOARCHIVO: ['RESOLUCION DE PENSIÓN'],\n        NU_IDTIPOARCHIVO_ARCH: [11]\n      }));\n      this.getArchivos.push(this.formBuilder.group({\n        TX_NOMBREARCHIVO: [null],\n        TX_BASE64_ARCH: [null],\n        TX_TIPOARCHIVO: ['SOPORTE DE LA DIVISION SALARIAL Y PRESTACIONAL'],\n        NU_IDTIPOARCHIVO_ARCH: [12]\n      }));\n      this.getArchivos.push(this.formBuilder.group({\n        TX_NOMBREARCHIVO: [null],\n        TX_BASE64_ARCH: [null],\n        TX_TIPOARCHIVO: ['DOCUMENTO DE IDENTIDAD ADVERSO CONTACTO EMERGENCIA'],\n        NU_IDTIPOARCHIVO_ARCH: [13]\n      }));\n      this.getArchivos.push(this.formBuilder.group({\n        TX_NOMBREARCHIVO: [null],\n        TX_BASE64_ARCH: [null],\n        TX_TIPOARCHIVO: ['DOCUMENTO DE IDENTIDAD REVERSO CONTACTO EMERGENCIA'],\n        NU_IDTIPOARCHIVO_ARCH: [14]\n      }));\n      console.log(this.getArchivos.value);\n    }\n\n    ngOnInit() {} //fromGroup: string,\n\n\n    cargarArchivo(files, idArchivo) {\n      this.test = {\n        ImageBaseData: '',\n        nombreArchivo: ''\n      }; // this.beneficiarioLocal.patchValue({\n      //   \"TX_DIRECCION_AFIL\": direccionCompuesta\n      // });\n      //this.beneficiarioLocal.get('NU_TELEFONO_AFIL')?.setValue(parseInt(numeroConcatenado));\n      //Leo el archivo\n\n      let fileList = files.target.files;\n      if (fileList.length <= 0) return console.log('cancelado');\n      if (fileList[0].type != 'application/pdf') return console.log('tipo invalido'); //convierto tamanio a MB\n\n      let fileSizeMb = +(fileList[0].size / 1024 / 1024).toFixed(2);\n      if (fileSizeMb > 10) return console.log('Tamaño fuera de limite');\n      let reader = new FileReader();\n      let tempData = this.test;\n      reader.readAsDataURL(fileList[0]);\n\n      reader.onload = function () {\n        tempData.ImageBaseData = reader.result;\n      };\n\n      reader.onerror = function (error) {\n        return console.log('Error: ', error);\n      };\n\n      this.test.ImageBaseData = tempData;\n      this.test.nombreArchivo = fileList[0].name;\n      console.log(this.test); // this.formularioArchivos.get(fromGroup+'.nombreArchivo')?.setValue(fileList[0].name)\n      // this.formularioArchivos.get(fromGroup+'.TX_BASE64_ARCH')?.setValue(tempData)\n      //this.getArchivos.patchValue([])\n\n      this.getArchivos.controls.forEach((element, index) => {\n        var _a, _b, _c;\n\n        let idEl = (_a = element.get('NU_IDTIPOARCHIVO_ARCH')) === null || _a === void 0 ? void 0 : _a.value;\n\n        if (idEl == idArchivo) {\n          console.log(element.value);\n          (_b = element.get('TX_NOMBREARCHIVO')) === null || _b === void 0 ? void 0 : _b.setValue(fileList[0].name);\n          (_c = element.get('TX_BASE64_ARCH')) === null || _c === void 0 ? void 0 : _c.setValue(tempData.ImageBaseData);\n          console.log(element.value);\n        } //console.log()\n\n      }); // (this.formBuilder.group({\n      //   TX_NOMBREARCHIVO: [null],\n      //   TX_BASE64_ARCH: [null],\n      //   TX_TIPOARCHIVO: ['DOCUMENTO DE IDENTIDAD REVERSO'],\n      //   NU_IDTIPOARCHIVO_ARCH: [1],\n      // }))\n    }\n\n    testBtn() {\n      console.log(this.test);\n      console.log(this.formularioArchivos.value);\n    }\n\n  }\n\n  DatosDocumentacionComponent.ɵfac = function DatosDocumentacionComponent_Factory(t) {\n    return new (t || DatosDocumentacionComponent)(i0.ɵɵdirectiveInject(i1.AfiliadosFormCompartidoService), i0.ɵɵdirectiveInject(i2.FormBuilder), i0.ɵɵdirectiveInject(i3.MatDialog));\n  };\n\n  DatosDocumentacionComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: DatosDocumentacionComponent,\n    selectors: [[\"app-datos-documentacion\"]],\n    decls: 6,\n    vars: 2,\n    consts: [[3, \"formGroup\"], [1, \"form-fields\"], [1, \"container\"], [1, \"row\"], [\"formArrayName\", \"archivos\"], [4, \"ngFor\", \"ngForOf\"], [1, \"row\", \"mb-2\", 3, \"formGroup\"], [1, \"col-sm-6\"], [1, \"w-100\"], [\"matInput\", \"\", \"readonly\", \"\", \"formControlName\", \"TX_NOMBREARCHIVO\"], [\"type\", \"button\", \"color\", \"primary\", \"matSuffix\", \"\", \"mat-icon-button\", \"\", \"matTooltip\", \"Tooltip msg\", \"matTooltipPosition\", \"above\"], [\"mat-flat-button\", \"\", \"color\", \"primary\", \"type\", \"button\", 3, \"click\"], [\"type\", \"file\", \"accept\", \"application/pdf\", \"data-max-size\", \"2048\", 2, \"display\", \"none\", 3, \"change\"], [\"inpCargarIdentidadAnverso\", \"\"]],\n    template: function DatosDocumentacionComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementContainerStart(0, 0);\n        i0.ɵɵelementStart(1, \"div\", 1);\n        i0.ɵɵelementStart(2, \"div\", 2);\n        i0.ɵɵelementStart(3, \"div\", 3);\n        i0.ɵɵelementContainerStart(4, 4);\n        i0.ɵɵtemplate(5, DatosDocumentacionComponent_ng_container_5_Template, 15, 2, \"ng-container\", 5);\n        i0.ɵɵelementContainerEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementContainerEnd();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵproperty(\"formGroup\", ctx.formArchivos);\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"ngForOf\", ctx.getArchivos.controls);\n      }\n    },\n    directives: [i2.NgControlStatusGroup, i2.FormGroupDirective, i2.FormArrayName, i4.NgForOf, i5.MatFormField, i6.MatInput, i2.DefaultValueAccessor, i2.NgControlStatus, i2.FormControlName, i5.MatLabel, i7.MatButton, i5.MatSuffix, i8.MatTooltip, i9.MatIcon],\n    styles: [\"[_nghost-%COMP%]{display:flex;flex-wrap:wrap;flex-direction:row;background-color:#fff;padding:20px 20px 20px 40px;min-height:80vh;height:auto;border-radius:0 0 1rem 1rem}.matField[_ngcontent-%COMP%]{font-size:1rem;margin-bottom:.75rem;width:100%}\"]\n  });\n  return DatosDocumentacionComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}